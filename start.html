<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Start ‚Äì Sl√§ktkort</title>

  <style>
    :root{
      color-scheme: light;

      /* L√•gm√§lda accenttoner */
      --tone-tree: #f3efe8;      /* varm sand */
      --tone-people: #eef4ef;    /* salviagr√∂n */
      --tone-rel: #eef1f4;       /* bl√•gr√• */
      --tone-place: #f4efe9;     /* varm gr√• */

      --border-soft: #e6e6e6;
      --text-muted: #555;
    }

    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      margin:0;
      padding:24px;
      max-width:1180px;
      margin-inline:auto;
      background:#fff;
      color:#111;
      line-height:1.5;
    }

    a{ color:inherit; text-decoration:none; }

    header{
      display:flex;
      justify-content:space-between;
      gap:12px;
      margin-bottom:16px;
    }

    h1{ margin:0; font-size:1.7rem; letter-spacing:-0.01em; }
    .muted{ color:var(--text-muted); margin:4px 0 0; }

    .topbar{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }

    .btn{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid #bbb;
      background:#fff;
      font:inherit;
      cursor:pointer;
    }

    /* ===== Statusrad ===== */
    .statusRow{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(160px,1fr));
      gap:12px;
      margin-bottom:18px;
    }

    .statusBox{
      border:1px solid var(--border-soft);
      border-radius:14px;
      padding:12px 14px;
    }

    .statusLabel{
      font-size:.85rem;
      color:var(--text-muted);
      margin:0;
    }

    .statusValue{
      font-size:1.4rem;
      font-weight:900;
      margin:2px 0 0;
      letter-spacing:-0.01em;
    }

    .tree{ background:var(--tone-tree); }
    .people{ background:var(--tone-people); }
    .rel{ background:var(--tone-rel); }
    .place{ background:var(--tone-place); }

    /* ===== Cards ===== */
    .grid{
      display:grid;
      gap:14px;
      grid-template-columns:1fr;
    }
    @media(min-width:880px){
      .grid{ grid-template-columns:1fr 1fr; }
    }

    .card{
      border:1px solid var(--border-soft);
      border-radius:16px;
      padding:16px;
      background:#fff;
    }

    .tile{
      border:1px solid var(--border-soft);
      border-radius:16px;
      padding:16px;
      background:#fff;
      transition: background .12s ease, transform .12s ease;
    }
    .tile:hover{
      background:#fcfcfc;
      transform: translateY(-1px);
    }

    .tileTitle{
      margin:0;
      font-size:1.1rem;
      font-weight:900;
    }
    .tileDesc{
      margin:6px 0 0;
      color:var(--text-muted);
      font-size:.95rem;
    }

    footer{
      margin-top:18px;
      color:#666;
      font-size:.9rem;
    }
  </style>
</head>

<body>

<script>
  /* DEMO AUTH */
  if(sessionStorage.getItem("demo_auth")!=="1"){
    location.href="./index.html";
  }
</script>

<header>
  <div>
    <h1>Start</h1>
    <p class="muted">√ñversikt √∂ver ditt sl√§ktarbete.</p>

    <nav class="topbar">
      <a class="btn" href="./start.html">Start</a>
      <a class="btn" href="./app/trees.html">Tr√§d</a>
      <a class="btn" href="./app/slaktkort.html">Personer</a>
      <a class="btn" href="./app/create-relation.html">Relationer</a>
      <a class="btn" href="./app/map.html">Karta</a>
    </nav>
  </div>

  <button id="logoutBtn" class="btn">Logga ut</button>
</header>

<!-- STATUS -->
<section class="statusRow" aria-label="√ñversikt">
  <div class="statusBox tree">
    <p class="statusLabel">Tr√§d</p>
    <p id="statTrees" class="statusValue">0</p>
  </div>

  <div class="statusBox people">
    <p class="statusLabel">Personer</p>
    <p id="statPeople" class="statusValue">0</p>
  </div>

  <div class="statusBox rel">
    <p class="statusLabel">Relationer</p>
    <p id="statRel" class="statusValue">0</p>
  </div>

  <div class="statusBox place">
    <p class="statusLabel">Platser</p>
    <p id="statPlace" class="statusValue">0</p>
  </div>
</section>

<!-- HUVUD -->
<section class="grid">
  <article class="tile">
    <h2 class="tileTitle">üå≥ Tr√§d</h2>
    <p class="tileDesc">Skapa och v√§lj vilket tr√§d du arbetar med.</p>
  </article>

  <article class="tile">
    <h2 class="tileTitle">üë§ Personer</h2>
    <p class="tileDesc">L√§gg till personer och deras grunduppgifter.</p>
  </article>

  <article class="tile">
    <h2 class="tileTitle">üîó Relationer</h2>
    <p class="tileDesc">Koppla samman personer i sl√§kten.</p>
  </article>

  <article class="tile">
    <h2 class="tileTitle">üó∫Ô∏è Karta</h2>
    <p class="tileDesc">Se var i landet sl√§kten h√∂r hemma.</p>
  </article>
</section>

<footer>
  Demo-l√§ge. All data sparas lokalt i webbl√§saren.
</footer>

<script>
  /* ===== DATA ===== */
  const KEY_TREES="slakttradet_trees";
  const KEY_ACTIVE="slakttradet_active_tree_id";
  const cardsKey=(id)=>"slakttradet_slaktkort_"+id;
  const relKey=(id)=>"slakttradet_relationer_"+id;

  function load(key){
    try{ return JSON.parse(localStorage.getItem(key)||"[]"); }
    catch{ return []; }
  }

  const trees = load(KEY_TREES);
  const activeId = localStorage.getItem(KEY_ACTIVE);
  const people = activeId ? load(cardsKey(activeId)) : [];
  const rel = activeId ? load(relKey(activeId)) : [];

  const withCoords = people.filter(p=>p.coords).length;

  document.getElementById("statTrees").textContent = trees.length;
  document.getElementById("statPeople").textContent = people.length;
  document.getElementById("statRel").textContent = rel.length;
  document.getElementById("statPlace").textContent = withCoords;

  document.getElementById("logoutBtn").onclick=()=>{
    sessionStorage.removeItem("demo_auth");
    location.href="./index.html";
  };
</script>

</body>
</html>
